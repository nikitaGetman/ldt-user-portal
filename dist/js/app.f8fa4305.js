(function(e){function t(t){for(var n,i,l=t[0],o=t[1],c=t[2],d=0,f=[];d<l.length;d++)i=l[d],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&f.push(r[i][0]),r[i]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n]);u&&u(t);while(f.length)f.shift()();return s.push.apply(s,c||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],n=!0,l=1;l<a.length;l++){var o=a[l];0!==r[o]&&(n=!1)}n&&(s.splice(t--,1),e=i(i.s=a[0]))}return e}var n={},r={app:0},s=[];function i(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=n,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(a,n,function(t){return e[t]}.bind(null,n));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],o=l.push.bind(l);l.push=t,l=l.slice();for(var c=0;c<l.length;c++)t(l[c]);var u=o;s.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"1bdf":function(e){e.exports=JSON.parse('[{"id":1,"global_id":1699129,"name":"Приют для бродячих животных № 1","adm_area":"Восточный административный округ","district":"район Вешняки","address":"город Москва, Рассветная аллея, дом 10","phone":"(909) 918-59-23","chief_name":"Дружинин Алексей Михайлович"},{"id":2,"global_id":1699130,"name":"Приют для бродячих животных № 4","adm_area":"Зеленоградский административный округ","district":"район Матушкино","address":"город Москва, город Зеленоград, Фирсановское шоссе, владение 5А","phone":"(909) 918-59-24","chief_name":"Игнатов Алексей Васильевич"},{"id":3,"global_id":61896897,"name":"Приют для безнадзорных животных","adm_area":"Западный административный округ","district":"район Солнцево","address":"город Москва, Родниковая улица, дом 22, строение 1","phone":"(495) 783-26-04","chief_name":"Архипова Е П"},{"id":4,"global_id":167604457,"name":"Приют для содержания безнадзорных и бесхозяйных животных № 12 Юго-Восточного административного округа","adm_area":"Юго-Восточный административный округ","district":"район Некрасовка","address":"город Москва, 2-я Вольская улица, дом 17А, строение 3","phone":"(909) 918-59-23","chief_name":"Тушов Денис Владимирович"},{"id":5,"global_id":1699129,"name":"Приют для бродячих животных № 1","adm_area":"Восточный административный округ","district":"район Вешняки","address":"город Москва, Рассветная аллея, дом 10","phone":"(909) 918-59-23","chief_name":"Дружинин Алексей Михайлович"},{"id":6,"global_id":1699130,"name":"Приют для бродячих животных № 4","adm_area":"Зеленоградский административный округ","district":"район Матушкино","address":"город Москва, город Зеленоград, Фирсановское шоссе, владение 5А","phone":"(909) 918-59-24","chief_name":"Игнатов Алексей Васильевич"},{"id":7,"global_id":61896897,"name":"Приют для безнадзорных животных","adm_area":"Западный административный округ","district":"район Солнцево","address":"город Москва, Родниковая улица, дом 22, строение 1","phone":"(495) 783-26-04","chief_name":"Архипова Е П"},{"id":8,"global_id":167604457,"name":"Приют для содержания безнадзорных и бесхозяйных животных № 12 Юго-Восточного административного округа","adm_area":"Юго-Восточный административный округ","district":"район Некрасовка","address":"город Москва, 2-я Вольская улица, дом 17А, строение 3","phone":"(909) 918-59-23","chief_name":"Тушов Денис Владимирович"}]')},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n,r=a("2b0e"),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("dashboard")],1)},i=[],l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dashboard"},[a("h3",[e._v("Категории животных")]),a("div",{staticClass:"dashboard__params"},[a("el-row",{staticClass:"dashboard__filter-row",attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-select",{attrs:{clearable:"",placeholder:"Приют"},model:{value:e.shelter,callback:function(t){e.shelter=t},expression:"shelter"}},e._l(e.shelters,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),a("el-col",{attrs:{span:4}},[a("el-select",{attrs:{clearable:"",placeholder:"Тип животного"},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},e._l(e.params.animalCategories,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-col",{attrs:{span:4}},[a("el-select",{attrs:{clearable:"",placeholder:"Пол животного"},model:{value:e.sex,callback:function(t){e.sex=t},expression:"sex"}},e._l(e.params.sexOptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}},[e._v(" "+e._s(t.label)+" "),a("i",{class:t.icon})])})),1)],1),a("el-col",{attrs:{span:4}},[a("el-button",{attrs:{plain:"",type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("Искать")])],1)],1)],1),a("div",{staticClass:"dashboard__list-wrapper"},[e.animalsList.length>0?a("ul",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:e.fetch,expression:"fetch"}],staticClass:"dashboard__list",attrs:{"infinite-scroll-disabled":"infiniteScrollDisabled"}},e._l(e.animalsList,(function(e,t){return a("v-animal-card",{key:t,attrs:{animal:e}})})),1):e._e(),e.loading?a("p",{staticClass:"dashboard__list-info"},[a("i",{staticClass:"el-icon-loading"}),e._v(" Загрузка...")]):e._e(),e.isAllLoaded?a("p",{staticClass:"dashboard__list-info"},[e._v("Все данные загружены")]):e._e()])])},o=[],c=a("5530"),u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._v("Animal card")])},d=[],f={name:"VAnimalCard"},m=f,p=a("2877"),h=Object(p["a"])(m,u,d,!1,null,null,null),b=h.exports,v=(a("99af"),a("b0c0"),a("d3b7"),a("ade3")),_=a("2909"),O=(a("277d"),a("ac1f"),a("1276"),"loading"),g="loaded",j="setError",y="setModel",w="updateModel",x="setList",S="addListItems",A="updateListItem",P="setParams",k="updateParams";function C(e,t,a){return function(n){var r=n&&n.response?n.response.status:0,s={title:t,message:a,status:r,error:n};throw e(j,s),n||new Error(a||t)}}function E(e,t){if(!t)throw Error("State ref empty: ".concat(t));var a=Array.isArray(t)?t:t.split("."),n=e;while(1){var r=a.shift();if(!r||!n[r])break;n=n[r]}if(n===e)throw Error("State property not found: ".concat(t));return n}var L="fetchAnimals",R="fetchShelters",$="createRequest",M="animals",T={state:{loading:!1,model:{shelters:[]},list:[],params:{limit:10,offset:0,count:null}},actions:(n={},Object(v["a"])(n,R,(function(e){var t=e.commit,a=e.getters;return a.apiService.fetchShelters().then((function(e){t(y,{name:M,model:{shelters:e}})}))["catch"](C(t,"Ошибка получения списка приютов (fetchShelters)"))})),Object(v["a"])(n,L,(function(e){var t=e.state,a=e.commit,n=e.getters,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=Object(c["a"])(Object(c["a"])({},t.params),r);return 0===s.offset&&a(x,{name:M,list:[]}),a(O,M),n.apiService.fetchAnimals(s).then((function(e){var n=e.list,r=e.count;a(x,{name:M,list:[].concat(Object(_["a"])(t.list),Object(_["a"])(n))}),a(k,{name:M,params:{offset:s.offset+n.length,count:r}})}))["catch"](C(a,"Ошибка получения списка животных (fetchAnimals)"))["finally"]((function(){return a(g,M)}))})),Object(v["a"])(n,$,(function(e,t){var a=e.commit,n=e.getters,r=t.animalId,s=t.phone,i=t.name,l=t.comment;return a(O,M),n.apiService.createRequest({animalId:r,phone:s,name:i,comment:l})["catch"](C(a,"Ошибка создания запроса (createRequest)"))["finally"]((function(){return a(g,M)}))})),n)},q=a("b8d8"),D={name:"Dashboard",components:{VAnimalCard:b},data:function(){return{params:q,shelter:null,type:null,sex:null}},computed:{module:function(){return this.$store.state[M]},loading:function(){return this.module.loading},shelters:function(){return this.module.model.shelters},animalsList:function(){return this.module.list},isAllLoaded:function(){return!this.loading&&this.module.params.offset===this.module.params.count},infiniteScrollDisabled:function(){return this.loading||this.isAllLoaded}},created:function(){this.$store.dispatch(R),this.fetch()},methods:{fetch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.shelter,a=this.type,n=this.sex;this.$store.dispatch(L,Object(c["a"])({shelter:t,type:a,sex:n},e))},search:function(){this.fetch({offset:0})}}},N=D,I=(a("b985"),Object(p["a"])(N,l,o,!1,null,null,null)),J=I.exports,U={name:"App",components:{Dashboard:J}},V=U,B=Object(p["a"])(V,s,i,!1,null,null,null),z=B.exports,F=a("2f62"),G=(a("4795"),a("bc3a")),H=a.n(G),K=Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_BASE_URL||"/",Q=a("1bdf"),W=H.a.create({baseURL:K,withCredentials:!0});W.interceptors.request.use((function(e){return Object(c["a"])(Object(c["a"])({},e),{},{headers:Object(c["a"])({},e.headers)})}),(function(e){return e})),W.interceptors.response.use((function(e){return(e&&e.data?e.data:e)||{}}),(function(e){var t=e.response?e.response.status:408;return console.warn("interceptors error",t,e.response,e),Promise.reject(e)}));var X,Y={client:W,fetchAnimals:function(e){return new Promise((function(t){setTimeout((function(){var a=[{value:e.offset,id:e.offset}],n={list:a,count:10};t(n)}),500)}))},createRequest:function(e){return new Promise((function(t){setTimeout((function(){var a=Object(c["a"])({status:"ok"},e);t(a)}),500)}))},fetchShelters:function(){return new Promise((function(e){setTimeout((function(){var t=Q;e(t)}),1e3)}))}},Z=Y,ee=(X={},Object(v["a"])(X,j,(function(e,t){e.error=t})),Object(v["a"])(X,O,(function(e,t){var a=E(e,t);a.loading=!0})),Object(v["a"])(X,g,(function(e,t){var a=E(e,t);a.loading=!1})),Object(v["a"])(X,y,(function(e,t){var a=t.name,n=t.model,s=E(e,a);r["default"].set(s,"model",n)})),Object(v["a"])(X,w,(function(e,t){var a=t.name,n=t.model,r=E(e,a);r.model=Object(c["a"])(Object(c["a"])({},r.model),n)})),Object(v["a"])(X,x,(function(e,t){var a=t.name,n=t.list,s=E(e,a);r["default"].set(s,"list",n)})),Object(v["a"])(X,S,(function(e,t){var a=t.name,n=t.list,r=E(e,a);r.list=r.list.concat(n)})),Object(v["a"])(X,A,(function(e,t){var a=t.name,n=t.index,r=t.value,s=E(e,a);Object.assign(s.list[n],r)})),Object(v["a"])(X,P,(function(e,t){var a=t.name,n=t.params,s=E(e,a);r["default"].set(s,"params",n)})),Object(v["a"])(X,k,(function(e,t){var a=t.name,n=t.params,r=E(e,a);r.params=Object(c["a"])(Object(c["a"])({},r.params),n)})),X),te={animals:T};r["default"].use(F["a"]);var ae=new F["a"].Store({getters:{apiService:function(){return Z}},mutations:ee,modules:te}),ne=a("5c96"),re=a.n(ne);a("0fae"),a("a24a");r["default"].config.productionTip=!1,r["default"].use(re.a),new r["default"]({store:ae,render:function(e){return e(z)}}).$mount("#app")},a24a:function(e,t,a){},b8d8:function(e){e.exports=JSON.parse('{"animalCategories":[{"value":1,"label":"Собака"},{"value":2,"label":"Кошка"}],"sexOptions":[{"value":"male","label":"Мальчик","icon":"el-icon-male"},{"value":"female","label":"Девочка","icon":"el-icon-female"}],"ageOptions":[{"value":1,"label":"Молодые ( < 2 лет )"},{"value":2,"label":"Взрослые ( 2-7 лет )"},{"value":3,"label":"Пожелые ( > 7 лет )"}],"sizeOptions":[{"value":"small","label":"Маленькое"},{"value":"medium","label":"Среднее"},{"value":"large","label":"Большое"}]}')},b985:function(e,t,a){"use strict";a("de7f")},de7f:function(e,t,a){}});
//# sourceMappingURL=app.f8fa4305.js.map